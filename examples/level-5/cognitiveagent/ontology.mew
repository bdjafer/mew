-- ===========================================================================
-- ONTOLOGY: CognitiveAgent
-- LEVEL: 5 (AGI-Ready)
-- DOMAIN: Full cognitive agent architecture with self-modeling
-- ===========================================================================

ontology CognitiveAgent {

  -- =========================================================================
  -- TYPE ALIASES
  -- =========================================================================

  type Confidence = Float [>= 0, <= 1]
  type Activation = Float [>= 0, <= 1]
  type Priority = Float [>= 0, <= 1]
  type Utility = Float

  type BeliefStatus = String [in: ["active", "dormant", "contradicted", "archived"]]
  type GoalStatus = String [in: ["active", "achieved", "failed", "suspended", "dropped"]]
  type MemoryType = String [in: ["working", "episodic", "semantic", "procedural"]]

  -- =========================================================================
  -- CORE NODE TYPES
  -- =========================================================================

  --- The cognitive agent itself
  node Agent {
    name: String [required],
    created_at: Timestamp = now(),

    -- Current state
    current_focus: String?,
    arousal_level: Activation = 0.5,
    last_cycle: Timestamp?,

    -- Cumulative metrics
    total_beliefs: Int = 0,
    total_goals_achieved: Int = 0,
    total_actions_taken: Int = 0
  }

  -- =========================================================================
  -- BELIEF SYSTEM
  -- =========================================================================

  --- A belief held by the agent
  node Belief {
    content: String [required],
    status: BeliefStatus = "active",
    confidence: Confidence = 0.5,
    activation: Activation = 0,

    -- Provenance
    source_type: String?,
    acquired_at: Timestamp = now(),
    last_accessed: Timestamp?,
    access_count: Int = 0,

    -- Memory
    memory_type: MemoryType = "working",
    importance: Priority = 0.5,
    decay_rate: Float = 0.01
  }

  --- A contradiction between beliefs
  node Contradiction {
    description: String?,
    detected_at: Timestamp = now(),
    resolved: Bool = false,
    resolution: String?
  }

  -- =========================================================================
  -- GOAL SYSTEM
  -- =========================================================================

  --- A goal the agent wants to achieve
  node Goal {
    description: String [required],
    status: GoalStatus = "active",
    priority: Priority = 0.5,
    utility: Utility = 1.0,

    -- Temporal
    deadline: Timestamp?,
    created_at: Timestamp = now(),
    achieved_at: Timestamp?,

    -- Tracking
    attempts: Int = 0,
    last_attempt: Timestamp?
  }

  --- A subgoal decomposition
  node SubGoal : Goal {
    is_mandatory: Bool = true
  }

  -- =========================================================================
  -- PLANNING SYSTEM
  -- =========================================================================

  --- A plan to achieve goals
  node Plan {
    name: String [required],
    description: String?,
    status: String = "draft",

    -- Quality metrics
    expected_utility: Utility = 0,
    success_probability: Confidence = 0.5,
    estimated_cost: Float = 0,

    -- Execution
    created_at: Timestamp = now(),
    executed_at: Timestamp?,
    completed_at: Timestamp?
  }

  --- An action the agent can take
  node Action {
    name: String [required],
    description: String?,
    action_type: String = "primitive",

    -- Execution
    duration: Duration?,
    cost: Float = 0,
    success_rate: Confidence = 1.0,

    -- History
    execution_count: Int = 0,
    last_executed: Timestamp?,
    average_duration: Duration?
  }

  -- =========================================================================
  -- MEMORY SYSTEM
  -- =========================================================================

  --- An episodic memory (specific event)
  node Episode {
    description: String [required],
    occurred_at: Timestamp [required],
    location: String?,
    duration: Duration?,

    -- Memory properties
    vividness: Activation = 1.0,
    emotional_valence: Float = 0,
    last_recalled: Timestamp?,
    recall_count: Int = 0
  }

  --- A semantic memory (general knowledge)
  node Concept {
    name: String [required],
    definition: String?,
    category: String?,

    -- Learning
    learned_at: Timestamp?,
    confidence: Confidence = 1.0,
    abstraction_level: Int = 0
  }

  -- =========================================================================
  -- PERCEPTION SYSTEM
  -- =========================================================================

  --- A percept from the environment
  node Percept {
    content: String [required],
    modality: String?,
    perceived_at: Timestamp = now(),
    confidence: Confidence = 0.9,
    attention_weight: Activation = 0.5
  }

  -- =========================================================================
  -- META-COGNITION
  -- =========================================================================

  --- Self-model component representing agent's understanding of itself
  node SelfModel {
    aspect: String [required],
    description: String?,
    confidence: Confidence = 0.5,
    last_updated: Timestamp = now()
  }

  --- A reasoning trace for explainability
  node ReasoningStep {
    step_type: String [required],
    description: String?,
    occurred_at: Timestamp = now(),
    duration_ms: Int?
  }

  --- Performance metric
  node PerformanceMetric {
    name: String [required],
    value: Float [required],
    measured_at: Timestamp = now(),
    context: String?
  }

  --- Coherence measurement
  node CoherenceScore {
    coherence: Float [required],
    option_space: Float?,
    friction: Float?,
    computed_at: Timestamp = now(),
    computation_method: String?
  }

  -- =========================================================================
  -- EDGE TYPES: BELIEF RELATIONSHIPS
  -- =========================================================================

  --- Agent holds belief
  edge believes(agent: Agent, belief: Belief) {
    strength: Confidence = 1.0,
    since: Timestamp = now()
  }

  --- Belief supports another belief
  edge supports_belief(premise: Belief, conclusion: Belief) [no_self] {
    inference_type: String?,
    strength: Confidence = 0.8
  }

  --- Belief contradicts another belief
  edge contradicts(belief1: Belief, belief2: Belief) [symmetric, no_self]

  --- Contradiction involves beliefs
  edge involves_belief(contradiction: Contradiction, belief: Belief)

  -- =========================================================================
  -- EDGE TYPES: GOAL RELATIONSHIPS
  -- =========================================================================

  --- Agent has goal
  edge has_goal(agent: Agent, goal: Goal) {
    adopted_at: Timestamp = now(),
    motivation: String?
  }

  --- Goal decomposes into subgoals
  edge decomposes_to(parent: Goal, child: SubGoal) [no_self] {
    is_sequential: Bool = false,
    order: Int = 0
  }

  --- Goals conflict
  edge conflicts_with(goal1: Goal, goal2: Goal) [symmetric, no_self] {
    conflict_type: String?,
    severity: Priority = 0.5
  }

  -- =========================================================================
  -- EDGE TYPES: PLANNING RELATIONSHIPS
  -- =========================================================================

  --- Plan for achieving goal
  edge plan_for(plan: Plan, goal: Goal)

  --- Plan contains action
  edge contains_action(plan: Plan, action: Action) {
    order: Int = 0,
    is_optional: Bool = false
  }

  --- Agent currently executing plan
  edge executing(agent: Agent, plan: Plan) {
    started_at: Timestamp = now(),
    current_step: Int = 0
  }

  -- =========================================================================
  -- EDGE TYPES: MEMORY RELATIONSHIPS
  -- =========================================================================

  --- Episode involves concept
  edge involves_concept(episode: Episode, concept: Concept) {
    role: String?
  }

  --- Concept related to concept
  edge concept_relation(concept1: Concept, concept2: Concept) [no_self] {
    relation_type: String [required],
    strength: Confidence = 0.5
  }

  -- =========================================================================
  -- EDGE TYPES: PERCEPTION
  -- =========================================================================

  --- Percept received by agent
  edge perceived(agent: Agent, percept: Percept)

  --- Percept updates belief
  edge updates_belief(percept: Percept, belief: Belief) {
    update_type: String = "revision"
  }

  -- =========================================================================
  -- EDGE TYPES: META-COGNITION
  -- =========================================================================

  --- Agent has self-model
  edge has_self_model(agent: Agent, model: SelfModel)

  --- Reasoning step in trace
  edge reasoning_trace(agent: Agent, step: ReasoningStep)

  --- Agent has performance metric
  edge has_metric(agent: Agent, metric: PerformanceMetric)

  --- Agent has coherence score
  edge has_coherence(agent: Agent, score: CoherenceScore)

}
