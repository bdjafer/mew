---
Date: 2026-01-13
Document: specification/4_QUERIES.md
Section: 20. MATCH Statement
Problem: Specification states "RETURN clause is required" but implementation adds compound MATCH statements (MATCH...LINK/SET/KILL/UNLINK) that don't require RETURN because they perform mutations instead of returning query results
Evidence: PR #25 implements MatchMutateStmt that allows MATCH followed by mutation keywords without RETURN clause. This is a legitimate language extension, not a specification error.

Resolution:
- Updated section 20.2 note to clarify RETURN is required for query MATCH but not for compound MATCH
- Updated section 20.2.1 table to add "Compound Statement" context
- Added new section 2.11 "Compound MATCH Statements" documenting syntax, semantics, examples, and differences from subquery mutations
- Updated section 2.12 AST to include MatchMutateStmt interface

Propagated to: specification/4_QUERIES.md (complete)
Hierarchy check: 1_LANGUAGE.md does not specify MATCH/RETURN behavior - no higher-level changes needed
---
---
Date: 2026-01-14
Document: specs/specification/5_MUTATIONS.md
Section: LinkStmt AST definition
Problem: Implementation adds if_not_exists: bool field for LINK IF NOT EXISTS syntax, but spec doesn't include it
Evidence: PR implements LINK IF NOT EXISTS feature, spec/impl mismatch discovered during review
---
Date: 2026-01-14
Document: specs/specification/4_QUERIES.md  
Section: MutationOp grammar and AST
Problem: Implementation allows SPAWN in compound MATCH...SPAWN...LINK statements, but spec only lists link/unlink/set/kill
Evidence: PR adds Spawn to MutationAction enum, spec/impl mismatch discovered during review
Resolution: Added ifNotExists: boolean field to LinkStmt AST definition
Propagated to: None needed (implementation already has this field)
---
Resolution: Added "spawn" SpawnExpr to MutationOp grammar and "Spawn" to MutationOp AST kind union
Propagated to: None needed (implementation already has this variant)
---
---
Date: 2026-01-14
Document: specs/specification/1_LANGUAGE.md
Section: Keywords (2.5.2), Expressions (5.X)
Problem: New syntax features (type checking expr:Type and IS [NOT] NULL) added to implementation without specification
Evidence: PR #41 adds parser support, but 1_LANGUAGE.md doesn't document these features

BEFORE:
- `is` keyword not in MEW Language Keywords
- No type check expression (expr:Type) documented
- IS [NOT] NULL operator not documented

AFTER:
- Add `is` to Logic keywords in section 2.5.2
- Add section 5.10 "Type Check Expression" documenting expr:Type syntax
- Add IS [NOT] NULL to section 5.11 Null Handling Expressions (renumbered from 5.10)

JUSTIFICATION:
These features are implemented and working (PR #41). The specification must document
all available syntax. The type check feature enables runtime type checking in patterns,
and IS NULL provides familiar SQL-style null checking syntax.

Downstream impact:
- No other spec files need updates (language-level feature)
- Tests already exist in examples/level-2/humanresources/operations/multiple_inheritance.mew
- Implementation complete in parser, analyzer, pattern evaluator

Resolution:
- Added `is` to MEW Language Keywords in section 2.5.2
- Added `is` to alphabetical keyword list in section 2.5.3
- Added new section 5.10 "Type Check Expression" with grammar, semantics, examples, and AST
- Added new section 5.11.1 "IS [NOT] NULL Operator" with grammar, semantics, examples
- Renumbered section 5.10 "Null Handling Expressions" to 5.11
- Renumbered section 5.11 "Expression Type Rules" to 5.12
- Updated type inference table to include `x:Type` and `x IS NULL` expressions

Propagated to: specs/specification/1_LANGUAGE.md (complete)
---
---
Date: 2026-01-17
Document: specs/v2/POLICY.md
Section: Entire document
Problem: Terminology uses "Authorization" but should use "Policy" per design decision
Evidence: Policy&Watch.md FAQ specifies: "Authorization" → "Policy" (less enterprise baggage, more neutral)
Resolution: Complete terminology transformation from "Authorization" to "Policy"
Changes made:
  - Title: "Authorization System" → "Policy System"
  - DSL keyword: `authorization` → `policy`
  - Layer 0 types: `_AuthorizationRule` → `_PolicyRule`
  - Edges: `_auth_has_*` → `_policy_has_*`, `_ontology_declares_auth` → `_ontology_declares_policy`
  - Error code: E7004 AUTH_EVAL_ERROR → POLICY_EVAL_ERROR
  - All narrative references updated throughout
  - Glossary term "Authorization" removed, "Policy" definition updated
  - Part XI renamed "Observation Policy" (was "Observation Authorization")
Propagated to: specs/v2/POLICY.md (single file revision)
---
Additional propagation:
  - specs/v2/WATCH.md: Updated 3 references from "authorization" to "policy"
Note: specs/plans/authorization.md retains old terminology (planning document, separate revision if needed)
---
---
Date: 2026-01-17
Document: specs/v2/WATCH.md
Section: Entire document
Problem: Terminology uses "Subscription/SUBSCRIBE" but should use "Watch/WATCH" per design decision
Evidence: Policy&Watch.md FAQ specifies: "Subscription" → "Watch" (active, clear, mirrors MATCH)
Resolution: Complete terminology transformation:
  - "Subscription System" → "Watch System"
  - `SUBSCRIBE` keyword → `WATCH` keyword
  - `_Subscription` → `_Watch`
  - "SubscribeStmt" → "WatchStmt"
  - All narrative references updated throughout
Propagated to:
  - specs/v2/WATCH.md (complete rewrite)
  - specs/v2/INTERIOR.md (28 references updated for watch, policy terminology)
---
Additional propagation:
  - specs/v2/TIME_CLOCK.md: Updated 2 references (Subscription → Watch)
  - specs/v2/REPRESENTATION.md: Updated 6 references (Subscription → Watch)
---
