---
Date: 2026-01-13
Document: specification/4_QUERIES.md
Section: 20. MATCH Statement
Problem: Specification states "RETURN clause is required" but implementation adds compound MATCH statements (MATCH...LINK/SET/KILL/UNLINK) that don't require RETURN because they perform mutations instead of returning query results
Evidence: PR #25 implements MatchMutateStmt that allows MATCH followed by mutation keywords without RETURN clause. This is a legitimate language extension, not a specification error.

Resolution:
- Updated section 20.2 note to clarify RETURN is required for query MATCH but not for compound MATCH
- Updated section 20.2.1 table to add "Compound Statement" context
- Added new section 2.11 "Compound MATCH Statements" documenting syntax, semantics, examples, and differences from subquery mutations
- Updated section 2.12 AST to include MatchMutateStmt interface

Propagated to: specification/4_QUERIES.md (complete)
Hierarchy check: 1_LANGUAGE.md does not specify MATCH/RETURN behavior - no higher-level changes needed
---
---
Date: 2026-01-14
Document: specs/specification/5_MUTATIONS.md
Section: LinkStmt AST definition
Problem: Implementation adds if_not_exists: bool field for LINK IF NOT EXISTS syntax, but spec doesn't include it
Evidence: PR implements LINK IF NOT EXISTS feature, spec/impl mismatch discovered during review
---
Date: 2026-01-14
Document: specs/specification/4_QUERIES.md  
Section: MutationOp grammar and AST
Problem: Implementation allows SPAWN in compound MATCH...SPAWN...LINK statements, but spec only lists link/unlink/set/kill
Evidence: PR adds Spawn to MutationAction enum, spec/impl mismatch discovered during review
Resolution: Added ifNotExists: boolean field to LinkStmt AST definition
Propagated to: None needed (implementation already has this field)
---
Resolution: Added "spawn" SpawnExpr to MutationOp grammar and "Spawn" to MutationOp AST kind union
Propagated to: None needed (implementation already has this variant)
---
---
Date: 2026-01-14
Document: specs/specification/1_LANGUAGE.md
Section: Keywords (2.5.2), Expressions (5.X)
Problem: New syntax features (type checking expr:Type and IS [NOT] NULL) added to implementation without specification
Evidence: PR #41 adds parser support, but 1_LANGUAGE.md doesn't document these features

BEFORE:
- `is` keyword not in MEW Language Keywords
- No type check expression (expr:Type) documented
- IS [NOT] NULL operator not documented

AFTER:
- Add `is` to Logic keywords in section 2.5.2
- Add section 5.10 "Type Check Expression" documenting expr:Type syntax
- Add IS [NOT] NULL to section 5.11 Null Handling Expressions (renumbered from 5.10)

JUSTIFICATION:
These features are implemented and working (PR #41). The specification must document
all available syntax. The type check feature enables runtime type checking in patterns,
and IS NULL provides familiar SQL-style null checking syntax.

Downstream impact:
- No other spec files need updates (language-level feature)
- Tests already exist in examples/level-2/humanresources/operations/multiple_inheritance.mew
- Implementation complete in parser, analyzer, pattern evaluator

Resolution:
- Added `is` to MEW Language Keywords in section 2.5.2
- Added `is` to alphabetical keyword list in section 2.5.3
- Added new section 5.10 "Type Check Expression" with grammar, semantics, examples, and AST
- Added new section 5.11.1 "IS [NOT] NULL Operator" with grammar, semantics, examples
- Renumbered section 5.10 "Null Handling Expressions" to 5.11
- Renumbered section 5.11 "Expression Type Rules" to 5.12
- Updated type inference table to include `x:Type` and `x IS NULL` expressions

Propagated to: specs/specification/1_LANGUAGE.md (complete)
---
---
Date: 2026-01-15
Document: specs/specification/5_MUTATIONS.md
Section: 5.10.6 Prepared Statements (REMOVED)
Problem: PREPARE/EXECUTE/DROP PREPARED feature added complexity (~450 lines) for marginal value

BEFORE:
- Section 5.10.6 documented PREPARE/EXECUTE/DROP PREPARED syntax
- Implementation added parser, lexer, analyzer, session support
- Tests in parameterized_queries.mew

JUSTIFICATION FOR REMOVAL:
- $param syntax already provides parameterization without PREPARE
- No actual plan caching implemented (just stored AST in session HashMap)
- Session-scoped only, limiting practical utility
- ~450 lines of code for feature that saves typing repeated queries
- The spec claimed "Plan caching for performance" but implementation didn't deliver this

Resolution:
- Removed section 5.10.6 "Prepared Statements" entirely
- Renumbered 5.10.7 "Parameter in Bulk Operations" → 5.10.6
- Renumbered 5.10.8 "Security" → 5.10.7
- Reverted parser/lexer/analyzer/session implementation
- Removed PREPARE/EXECUTE tests from parameterized_queries.mew

Propagated to: specs/specification/5_MUTATIONS.md (complete), code reverted
---
